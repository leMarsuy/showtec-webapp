<section class="flex flex-col mt-6">
  <section class="flex items-center justify-between">
    <h2 class="font-bold text-lg text-sky-500 tracking-wide">Account Titles</h2>
    <button mat-button class="w-fit self-end" (click)="openUpsertTitle()">
      <mat-icon fontIcon="add"></mat-icon> Add Title
    </button>
  </section>

  <div class="container min-h-[400px] max-h-[400px] my-2 overflow-y-scroll bg-gray-50">
    <table class="w-full">
      <thead>
        <tr class="bg-gray-300 border-b border-gray-400 sticky top-0">
          <th class="py-2 px-4 text-left text-gray-700 font-medium">Account Title</th>
          <th class="py-2 px-4 text-left text-gray-700 font-medium">Account Category</th>
          <th class="py-2 px-4 text-center text-gray-700 font-medium w-[144px]">Actions</th>
        </tr>
      </thead>

      <tbody>
        @for(title of titles; track $index) {
        <tr class=" border-b border-gray-200 even:bg-gray-50 odd:bg-gray-100">
          <td class="py-2 px-4 max-w-[250px] break-word">{{ title.name }}</td>
          <td class="py-2 px-4">
            <p>{{ title.category }}</p>
          </td>
          <td class="text-center align-center [&_button]:mx-1.5">
            <button (click)="openUpsertTitle(title, $index)">
              <mat-icon fontIcon="edit" class="block text-amber-500"></mat-icon>
            </button>
            <button (click)="removeCategoryAt(title, $index)">
              <mat-icon fontIcon="delete" class="block text-rose-500"></mat-icon>
            </button>
          </td>

        </tr>
        }
      </tbody>
    </table>
  </div>
  <div class="self-end">
    <button mat-button class="w-fit" [disabled]="!isDirty" (click)="undoCategoryChanges()">
      <mat-icon fontIcon="refresh"></mat-icon> Reset
    </button>
  </div>

</section>
